<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr" lang="fr-fr" itemscope="" itemtype="http://schema.org/Blog">
  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; style-src 'self' 'unsafe-inline'; frame-src 'self' https://apis.google.com https://accounts.google.com; script-src 'self' http://code.jquery.com http://www.google-analytics.com https://apis.google.com; img-src 'self' http://www.google-analytics.com">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
  <meta name="description" content="Blog sur la qualité web en général, et l'automatisation de test web en particulier. Responsable tests et qualité web depuis 7 ans." />
  <meta name="keywords" content="test, watir, qualité, cucumber, jenkins, bug, selenium, appium, bournisien" />
  <meta name="robots" content="index,follow" />


  
    <title>Je teste donc je suis - Journal d'un testeur</title>
    <meta property="og:title" content="Je teste donc je suis" />
    <meta property="og:url" content="http://blog.fabricebournisien.eu/" />
    <meta property="og:type" content="website" />
  


  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/poole.css">

  <!-- Icons -->
  <link rel="shortcut icon" type="image/png" href="/public/qualite-min.jpg">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">

  <link rel="stylesheet" href="/public/fancybox/jquery.fancybox.css" type="text/css" media="screen" />

  <meta property="og:image"  content="/public/pictures/web-qualite.jpg"/>
  <meta itemprop="image"     content="/public/pictures/web-qualite.jpg" />
  <meta name="twitter:image" content="/public/pictures/web-qualite.jpg" />  
</head>

  <body class="theme-base-0c layout-reverse">
    <div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <h1>
        <a href="/">
          Je teste donc je suis
        </a>
      </h1>
      <p class="lead">Blog d'un automatiseur de tests web.</p>
    </div>

    <nav class="sidebar-nav">
      
      
        
          
        
      
        
          
            <a class="sidebar-nav-item" href="/about/">About</a>
          
        
      
        
          
            <a class="sidebar-nav-item" href="/archive/">Archives</a>
          
        
      
        
      
        
          
        
      
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
	  <a class="sidebar-nav-item" href="http://www.fabricebournisien.eu">CV</a>
	  <!-- SiteSearch Google --> 
	  <form method="get" action="http://www.google.com/search"> 
		<input type="hidden" name="ie" value="UTF-8" /> 
		<input type="hidden" name="oe" value="UTF-8" /> 
		<input type="hidden" name="domains" value="blog.fabricebournisien.eu" /> 
		<input type="hidden" name="sitesearch" value="blog.fabricebournisien.eu" checked="checked" />
		<input type="text" name="q" size="18" maxlength="255" value="" title="Chercher sur le blog" />
		<input type="submit" name="btnG" value="Chercher" /> 
	  </form>
	  <!-- SiteSearch Google -->
    </nav>

    <p>&copy; 2015 - <a href="https://plus.google.com/104493142924184161356" rel="author">Fabrice Bournisien</a></p>
  </div>
</div>

    <div class="content container">
      <div class="posts">
  
  <div class="post" itemscope="" itemtype="http://schema.org/BlogPosting">
    <h2 class="post-title" itemprop="name">
      <a href="/2014/12/13/kiss-simple-et-efficace/" itemprop="url" rel="bookmark">
        KISS : Keep it simple and stupid
      </a>
    </h2>

	<span class="post-date">
		<time class="date" datetime="2014-12-13" itemprop="datePublished">
			
			13
			décembre
			
			2014
		</time>
		- par Fabrice Bournisien
		
		- <a href="/tag/qualite">Qualite</a>
		
		- <a href="/tag/ruby">Ruby</a>
		
	</span>

	<div itemprop="ArticleBody"><p>Quand on travaille sur des gros projets, on a tendance à rajouter beaucoup de fonctions, de code, partout, à tout bout de champ.
Il faut savoir prendre du recul, pour simplifier le code, et faire des choses simples et efficaces.</p>

<p>Dans le cadre de mon travail, l&#39;équipe test a pas mal changé cet été, avec 2 nouveaux arrivants. Ca tombe bien, on a aussi récupéré des nouveaux projets à tester.
C&#39;est en les formant à nos méthodes, notre code, que j&#39;ai repéré des améliorations à faire, et qu&#39;ils ont fait des suggestions intéressantes.</p>

<p>Avec leur arrivée, une partie de ma charge de travail a pu diminuer un peu, me permettant de réflechir, de me poser des questions, de chercher des idées &quot;innovantes&quot; pour résoudre des problèmes mis de côté par manque de temps depuis des semaines (voire plus).</p>

<h3>Mise en place en 3 clics</h3>

<p>Bon, j&#39;éxagère, il faut plus que 3 clics. L&#39;utilisation d&#39;un Gemfile et de la gem <a href="https://rubygems.org/gems/bundler">bundler</a> permet de simplifier l&#39;ensemble de la procédure.</p>

<p>Pour préparer un nouveau poste (suite à une embauche, une réinstallation, ou un nouveau serveur, il faut alors installer ruby, la gem bundler, récupérer le dépôt du code, puis lancer juste la commande <code>bundle install</code>. 
Et le tour est joué.</p>

<p>Pour aller plus loin : mise en place sur tous les serveurs de tests d&#39;une routine vérifiant que la liste est à jour et conforme à ce qu&#39;on attend, avec un </p>
<div class="highlight"><pre><code class="language-" data-lang="">bundle update
gem cleanup
</code></pre></div>
<h3>L&#39;information, le nerf de la guerre</h3>

<p>Plongés dans les tests, nous disposions de plusieurs documentations, avec des buts plus ou moins précis. Localisées à plusieurs endroits.
Du coup, petit ménage d&#39;été, pour les regrouper, classer, mettre à jour. Au final, on a gardé plusieurs documents, pour plusieurs rôles différents :</p>

<ul>
<li><strong>Documentation du code</strong> : présente depuis le début, avec génération automatique par la gem ruby <a href="https://rubygems.org/gems/rdoc">rdoc</a> et un petit script ruby (basé sur des expressions régulières) pour lister les step_definitons. Basée évidemment sur les commentaires dans le code, qui sont eux mêmes le premier niveau d&#39;explication.</li>
<li><strong>Documentation sur comment coder</strong> : quelques documents précis sur comment installer l&#39;environnement, les conventions de codage, ou des points précis et complexe des tests.</li>
<li><strong>Documentation sur les produits</strong> : nous testons une demie douzaine de projets, plus ou moins liés les uns avec les autres. Pour pouvoir teter efficacement, il vaut mieux savoir comment le projet fonctionne, et dans l&#39;idéal, connaître également les bugs les plus courants sur le projet.</li>
</ul>

<h3>Codes complexes et compliqués</h3>

<p>Aujourd&#39;hui, l&#39;ensemble de nos codes testant les projets de la société représenter environ 11 000 lignes de codes (essentiellement en ruby, cucumber, shell)</p>

<p>Il y a 10 jours, j&#39;ai regardé pour la première fois depuis des mois les résultats de <a href="https://rubygems.org/gems/flog">flog</a> sur le projet. 
Pour résumer, flog analyse le code source, compte combien de fois on effectue chaque &quot;action&quot;, et s&#39;ensuit une note de complexité pour chaque méthode, et pour l&#39;ensemble.</p>

<p>Comme on peut classer, on voit immédiatement les fonctions les plus compliquées. Reste à savoir si la complexité est normale ou non. Après avoir lu pas mal d&#39;articles sur le sujet, et testé moi même sur notre code, j&#39;estime qu&#39;une fonction avec un score supérieur à 50 doit être analysée, et éventuellement, modifiée.</p>

<h4>Quelques chiffres</h4>

<p>J&#39;ai profité d&#39;un &quot;temps calme&quot; au bureau pour bosser sur le sujet. </p>

<p>Avant :</p>
<div class="highlight"><pre><code class="language-" data-lang="">  7128.5: flog total
    15.6: flog/method average

   793.5: main#none
   236.1: main#launch_browser
   197.0: main#get_job_results
   138.0: Then#/^HTML (contain|don't contain) (.*)$/
   136.7: Then#/^I don't see errors$/
   134.8: FormatPage#format_is_present
   131.1: main#compare_stats
    90.7: Then#/^I click on the insocial expand$/
    81.4: main#stats_of_day
</code></pre></div>
<p>Après : </p>
<div class="highlight"><pre><code class="language-" data-lang=""> 6166.2: flog total
    13.8: flog/method average

   827.4: main#none
   197.0: main#get_job_results
   168.0: main#launch_browser
   134.8: FormatPage#format_is_present
    90.7: Then#/^I click on the insocial expand$/
    90.3: main#compare_stats
    77.0: main#stats_of_day
</code></pre></div>
<p>On note plusieurs choses :</p>

<ul>
<li>La note globale a chuté (-14%). </li>
<li>Cela fait mathématiquement baissé la moyenne par méthode.</li>
<li>Certaines méthodes &quot;complexes&quot; ont bien baissé.</li>
<li>D&#39;autres ont augmenté : avec les pull request de mes collègues, rien d&#39;aberrant. La note a donc baissé alors que dans le même temps, plus de 1 500 lignes de code ont été ajoutées / modifiées.</li>
<li>Certaines méthodes, complexes, ont une note qui correspond à leur difficulté de compréhension. </li>
</ul>

<h4>Qu&#39;est ce que j&#39;ai changé ?</h4>

<p>Rien de transcendant :</p>

<ul>
<li>Du code dupliqué a été &quot;mis en commun&quot; pour faciliter la maintenance.</li>
<li>Des optimisations faciles : par exemple, dans une méthode utilisant beaucoup de données, j&#39;ai remplacé l&#39;utilisation d&#39;un tableau par une copie du contenu d&#39;une données. Passer de <code>my_array[&#39;result&#39;][&#39;report&#39;][&#39;url&#39;]</code> à <code>my_url</code> quand c&#39;est utilisé 7-8 fois, ça améliore la complexité et aussi la lisibilité et la maintenabilité.</li>
<li>Des méthodes ont été découpées pour clarifier ce que le code faisait.</li>
</ul>

<h3>Et c&#39;est conventionnel tout ça ?</h3>

<p>En parralèle, j&#39;ai mis à jour la gem <a href="https://rubygems.org/gems/rubocop">rubocop</a>. Cette gem permet de vérifier que toutes les conventions sont respectées. La liste des choses vérifiées s&#39;est beaucoup étoffée depuis la dernière fois que j&#39;avais mis à jour la gemme (de 0.18.1 à 0.27.1), et j&#39;ai passé quelques heures à modifier notre code pour qu&#39;il passe les nouvelles règles.</p>

<p>Sur le projet, nous avons désactivé 27 règles parmi les centaines présentes. Par exemple, nous désactivons la limite sur le calcul de <a href="http://fr.wikipedia.org/wiki/Nombre_cyclomatique">complexité cyclomatique</a> puisque nous utilisons flog.</p>

<p>Rubocop nous a aussi aidé sur la complexité : une nouvelle règle a fait remonté quelques variables non utilisés. Les supprimer à fait baisser les notes de flog.</p>

<p>Pour l&#39;automatisation, un git-hooks lance un script shell :</p>

<ul>
<li>vérifiant le résultat de rubocop, </li>
<li>vérifiant qu&#39;il ne reste pas de trace d&#39;un conflit dans les fichiers,</li>
<li>vérifiant que tous les fichiers yaml sont syntaxiement juste (<code>find . -name *.yml -exec yaml-lint {} \;</code> pour les analyser, avec la gem <a href="https://rubygems.org/gems/yaml-lint">yaml-lint</a>)</li>
</ul>

<h3>KISS, et après</h3>

<p>Le <a href="http://fr.wikipedia.org/wiki/Principe_KISS">principe KISS</a> (pour Keep it simple and stupid) est une façon de travailler qui incite à rester simple pour être efficace.
Certains points cités plus hauts ne sont pas triviaux à mettre en place, mais permettent sur le long terme à limiter les risques, à garder facilement du code propre, compréhensible, et simple.</p>

<p>Ma todolist pour la suite ? </p>

<ul>
<li>Traquer le code dupliqué (j&#39;en ai déjà repéré quelques morceaux, dont le nettoyage n&#39;était pas possible dans le temps que j&#39;avais), </li>
<li>Supprimer le code mort et non utilisé.</li>
<li>Continuer à documenter, ranger, classer.</li>
<li>Refactoriser ce qui peut l&#39;être et dont le code n&#39;est pas amené à disparaître dans les prochains mois.</li>
</ul>
</div>
  </div>
  
  <div class="post" itemscope="" itemtype="http://schema.org/BlogPosting">
    <h2 class="post-title" itemprop="name">
      <a href="/2014/09/09/bonne-annee-2014/" itemprop="url" rel="bookmark">
        Bonne année 2014
      </a>
    </h2>

	<span class="post-date">
		<time class="date" datetime="2014-09-09" itemprop="datePublished">
			
			9
			septembre
			  
			2014
		</time>
		- par Fabrice Bournisien
		
	</span>

	<div itemprop="ArticleBody"><p>Il y a des années qui sont très bonnes, pleines de bonnes choses.
Pour moi, la référence, c&#39;était 2009 : je me suis marié, nous avons acheté notre appartement, changé de voiture, ma femme a trouvé un travail.</p>

<p>Il y a des années, où c&#39;est moins bon, mais qui ne sont pas mauvaises.</p>

<p>Et après, il y a des années où la poisse s&#39;acharne. 
Pour moi, cette année noire, c&#39;est 2014. 
Pour résumer, sur les 250 jours de l&#39;année déjà passés, ma famille a compté pas loin de 300 jours d&#39;hospitalisation.
A tout ceci s&#39;ajoute le fait que j&#39;habite loin de mes familles, et que la communication n&#39;est pas toujours simple.</p>

<ul>
<li>Janvier 2014 : Décès de ma belle-mère. Même si elle n&#39;était pas en super santé, cela a surpris tout le monde. Ma femme était effondrée. (Et j&#39;étais pas beaucoup mieux)</li>
<li>Janvier 2014 : Mon père subit des examens pour un problème cardiaque. Avec stents. Posés avec complications.</li>
<li>Février 2014 : Ma filleule entre en urgence à l&#39;hôpital, et est placée en coma artificiel le temps de faire les examens, pour éviter qu&#39;elle souffre. Une petite fille de 5 mois passe donc 15 jours dans le coma.</li>
<li>Mars 2014 : Fin du coma, difficile et longue adaptation. Elle est clairement traumatisée, elle a peur des gens habillés en gris, etc...</li>
<li>Mars 2014 : Au boulot, j&#39;ai l&#39;impression que rien ne va. Je mets ça sur le compte de mes ennuis familiaux.</li>
<li>Avril 2014 : Mon père gagne un double pontage, en &quot;urgence&quot;, avec plus d&#39;un mois d&#39;avance sur la date prévue.</li>
<li>Avril 2014 : Je continue de cloisonner entre boulot et perso, mettant tout mon stress sur le compte du personnel.</li>
<li>Avril 2014 : Mon père gagne un nouveau pontage.</li>
<li>Avril 2014 : J&#39;explique la situation à mes chefs, qui commençaient à se demander pourquoi j&#39;étais aussi sur les nerfs. On réalise que l&#39;effectif du pole qualité n&#39;est pas suffisant. Contre mon avis, on privilégie des solutions pratiques plutôt qu&#39;une embauche.</li>
<li>Avril 2014 : On ajoute une chirurgie exploratoire abdominale sur mon père.</li>
<li>Mai 2014 : Amputation de la jambe pour mon père. </li>
<li>Mai 2014 : Sudweb me donne une bouffée d&#39;air.</li>
<li>Juin 2014 : Je revois mon père pour la première fois de l&#39;année. Il est dans un tel état que j&#39;ai l&#39;impression de lui dire adieu.</li>
<li>Juillet 2014 : Lors d&#39;une sortie entre collègues organisée par ma société, blessure de mon binôme. Je suis donc seul là où on ne suffisait pas à deux.</li>
<li>Juillet 2014 : Nouvel opération de mon père, pour &quot;fignoler&quot; l&#39;amputation.</li>
<li>Juillet 2014 : On fait passer des entretiens pour embaucher du monde au pole qualité.</li>
<li>Aout 2014 : Au boulot, on me propose une mutation. De Toulouse à Montpellier. (5 personnes à Toulouse, 40 à Montpellier)</li>
<li>Aout 2014 : Vacances. Repos, pas d&#39;internet (ou si peu). Je me repose, j&#39;oublie tout.</li>
<li>Aout 2014 : Ma femme est très fatiguée, malade.</li>
<li>Aout 2014 : J&#39;apprends qu&#39;une de mes tantes va mieux : elle a eu un AVC avec complications, alors qu&#39;elle avait déjà une santé fragile. </li>
<li>Aout 2014 : Premier jour de boulot, lorsque je prends ma voiture, quelqu&#39;un a laissé un mot pour s&#39;excuser pour la bosse. Ma portière s&#39;est faite enfoncer durant la nuit.</li>
<li>Aout 2014 : Deuxième semaine de reprise : chute de mon fils de sa hauteur à plat dos, on fini aux urgences. Il ne pose plus son pied par terre, et ne peut donc plus marcher. Ils nous font surveiller les symptômes d&#39;un traumatisme crânien.</li>
<li>Aout 2014 : Mon fils ne marche toujours pas 2 jours après, passage chez le médecin. Qui nous dit de patienter, puis de passer une échographie du genou.</li>
<li>Aout 2014 : Ma meilleure amie passe aux urgences suite à un problème de santé pendant ses vacances.</li>
<li>Aout 2014 : Avec l&#39;arrivée d&#39;un nouveau testeur qui code des tests auto, je ressens d&#39;autant plus le manque de code pour moi. En regardant en arrière, j&#39;ai du coder en tout et pour tout 15 jours depuis janvier. (Le reste, c&#39;est du test à la main, dont 75% au moins peut être automatisé)</li>
<li>Aout 2014 : Ma meilleure amie retourne à l&#39;hôpital pour quelques jours après son retour de vacances.</li>
<li>Septembre 2014 : &Eacute;chographie négative pour le genou de mon fils, retour aux urgences. Cette fois, on est fixé (10 jours après)&nbsp;: il ne pose pas le pied par terre parce qu&#39;il a une fracture du tibia (Fracture en cheveu, compliquée à voir sur une radio). C&#39;est parti pour un plâtre pendant 3 semaines.</li>
<li>Septembre 2014 : Ma femme est toujours malade, mais on est maintenant sûrs&nbsp;: on va être parents une deuxième fois.</li>
</ul>

<p>Quand je racontais un point particulier à quelqu&#39;un, on me disait toujours &quot;Courage, ça va passer&quot;. Quand je vois la liste, je comprends mieux pourquoi, deux semaines après mon retour de vacances, j&#39;ai l&#39;impression de passer à côté de ma vie depuis quelques mois.</p>

<ul>
<li>J&#39;ai un travail, où je devrais faire mon métier. Pourtant, j&#39;ai l&#39;impression de ne pas faire mon métier.</li>
<li>J&#39;ai une famille, que je ne vois pas aussi souvent que je voudrais.</li>
<li>J&#39;ai un fils, et j&#39;ai l&#39;impression de ne pas le voir grandir.</li>
<li>J&#39;ai une vie, mais je ne sais pas où elle me mène.</li>
</ul>
</div>
  </div>
  
  <div class="post" itemscope="" itemtype="http://schema.org/BlogPosting">
    <h2 class="post-title" itemprop="name">
      <a href="/2014/07/05/changement-de-blog/" itemprop="url" rel="bookmark">
        Changement de blog
      </a>
    </h2>

	<span class="post-date">
		<time class="date" datetime="2014-07-05" itemprop="datePublished">
			
			5
			juillet
			  
			2014
		</time>
		- par Fabrice Bournisien
		
	</span>

	<div itemprop="ArticleBody"><p>Depuis quelques semaines, j&#39;avais envie de changer d&#39;air pour mon blog : voir de nouvelles technologies, d&#39;avoir un blog plus professionnel.</p>

<p>J&#39;ai pas mal fouillé, et je suis très tenté par <a href="http://jekyllrb.com/">Jekyll</a> et <a href="https://github.com/poole/poole">Poole</a>, qui permettent d&#39;avoir facilement un site statique écrit en markdown. Le tout hébérgé par github.</p>

<p>Plusieurs objectifs à ce changement :</p>

<ul>
<li>Etre encore plus maître de mon outil de publication.</li>
<li>Découvrir de nouvelles technologies.</li>
<li>En profiter pour faire le ménage sur le blog.</li>
<li>Remettre à plat la ligne éditoriale.</li>
</ul>
</div>
  </div>
  
</div>

<div class="pagination">
  
    <a class="pagination-item older" href="/page3">Older</a>
  
  
    
      <a class="pagination-item newer" href="/">Newer</a>
    
  
</div>

    </div>

  <script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>
  <script type="text/javascript" src="/public/fancybox/jquery.fancybox.pack.js"></script>
  <script type="text/javascript" src="/public/js/script.js"></script>
  </body>
</html>
